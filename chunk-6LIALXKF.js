import{a as ne}from"./chunk-TSJB4ZUS.js";import{b as j,c as y,d as U,e as $,f as Q,g as q,h as W,k as Y,l as Z,s as K,t as X,u as J}from"./chunk-WTQPHL4G.js";import"./chunk-UIA7XDHT.js";import{a as ee,b as te}from"./chunk-7W6NXIM7.js";import{$ as v,D as l,Ea as N,Fa as w,Ga as G,H as S,Ha as A,Ia as B,Ja as R,L as f,O as d,P as E,Q as C,R as k,W as t,Wa as H,X as n,Y as c,Z as T,_ as F,aa as m,ba as p,ia as s,ja as M,ka as b,na as V,oa as I,pa as D,q as P,s as g,t as u,ta as z,u as x,ua as L,v as h}from"./chunk-AGESHSDR.js";var ie={ADMIN:"bg-red-500 text-white",USER:"bg-blue-500 text-white",MANAGER:"bg-green-500 text-white",HR:"bg-yellow-500 text-black",EXECUTIVE:"bg-purple-500 text-white",TEAM_LEAD:"bg-pink-500 text-white",FINANCE:"bg-orange-500 text-white",IT:"bg-cyan-500 text-white",MARKETING:"bg-indigo-500 text-white",SALES:"bg-teal-500 text-white"};function oe(r,i){return ie[r]?ie[r]:i?"bg-gray-500 text-white":"bg-emerald-500 text-white"}function de(r,i){r&1&&(x(),t(0,"svg",3),c(1,"path",4),n())}function ce(r,i){r&1&&(x(),t(0,"svg",3),c(1,"path",5),n())}function pe(r,i){if(r&1&&(t(0,"span",6),s(1),n()),r&2){let e=p();k(e.getCountBadgeClasses()),l(),b(" ",e.role==null?null:e.role.userCount," ")}}var O=class r{role=null;showIcon=!0;showCount=!1;size="md";getBadgeClasses(){if(!this.role)return"bg-gray-300 text-gray-700";let i=oe(this.role.name,this.role.isSystem),e=this.getSizeClasses();return`${i} ${e}`}getSizeClasses(){switch(this.size){case"sm":return"px-2 py-0.5 text-xs";case"lg":return"px-3 py-1 text-sm";default:return"px-2.5 py-0.5 text-xs"}}getCountBadgeClasses(){return this.role?(this.role.isSystem,"bg-white bg-opacity-30 text-white"):"bg-gray-500 text-white"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-role-badge"]],inputs:{role:"role",showIcon:"showIcon",showCount:"showCount",size:"size"},decls:5,vars:7,consts:[[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"title"],["class","mr-1 h-3 w-3","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],["class","ml-1.5 px-1.5 py-0.5 rounded-full text-xs",3,"class",4,"ngIf"],["fill","currentColor","viewBox","0 0 20 20",1,"mr-1","h-3","w-3"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["d","M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"],[1,"ml-1.5","px-1.5","py-0.5","rounded-full","text-xs"]],template:function(e,o){e&1&&(t(0,"span",0),f(1,de,2,0,"svg",1)(2,ce,2,0,"svg",1),s(3),f(4,pe,2,3,"span",2),n()),e&2&&(k(o.getBadgeClasses()),d("title",(o.role==null?null:o.role.description)||(o.role==null?null:o.role.name)),l(),d("ngIf",o.showIcon&&(o.role==null?null:o.role.isSystem)),l(),d("ngIf",o.showIcon&&!(o.role!=null&&o.role.isSystem)),l(),b(" ",(o.role==null?null:o.role.name)||"Unknown"," "),l(),d("ngIf",o.showCount&&(o.role==null?null:o.role.userCount)!==void 0&&(o.role==null?null:o.role.userCount)!==null))},dependencies:[R,w],styles:["[_nghost-%COMP%]{display:inline-block}"]})};function me(r,i){if(r&1){let e=v();t(0,"div",45),x(),t(1,"svg",46),c(2,"circle",47)(3,"line",48)(4,"line",49),n(),h(),t(5,"span"),s(6),n(),t(7,"button",50),m("click",function(){g(e);let a=p();return u(a.clearMessages())}),s(8,"\xD7"),n()()}if(r&2){let e=p();l(6),M(e.errorMessage)}}function ge(r,i){if(r&1){let e=v();t(0,"div",51),x(),t(1,"svg",46),c(2,"path",52)(3,"polyline",53),n(),h(),t(4,"span"),s(5),n(),t(6,"button",50),m("click",function(){g(e);let a=p();return u(a.clearMessages())}),s(7,"\xD7"),n()()}if(r&2){let e=p();l(5),M(e.successMessage)}}function ue(r,i){r&1&&(x(),t(0,"g"),c(1,"path",67),n())}function xe(r,i){r&1&&(x(),t(0,"g"),c(1,"rect",68)(2,"path",69),n())}function fe(r,i){r&1&&(x(),t(0,"g"),c(1,"path",70)(2,"circle",71)(3,"path",72)(4,"path",73),n())}function _e(r,i){if(r&1&&(t(0,"div",54),c(1,"div",55)(2,"div",56),t(3,"div",57)(4,"div",58)(5,"div",59)(6,"span",60),s(7),n()(),t(8,"div",61),x(),t(9,"svg",62),T(10,63),f(11,ue,2,0,"g",64)(12,xe,3,0,"g",64)(13,fe,5,0,"g",64),F(),n()()(),h(),t(14,"div",65)(15,"div",66),s(16),n()()()()),r&2){let e=i.$implicit;E("--card-color",e.color),l(7),M(e.title),l(),E("background",e.color),l(2),d("ngSwitch",e.icon),l(),d("ngSwitchCase","shield"),l(),d("ngSwitchCase","lock"),l(),d("ngSwitchCase","users"),l(3),M(e.value)}}function he(r,i){r&1&&(t(0,"div",74),c(1,"div",75),t(2,"p"),s(3,"Loading roles..."),n()())}function be(r,i){r&1&&(t(0,"p"),s(1,"Try adjusting your search criteria"),n())}function Ce(r,i){r&1&&(t(0,"p"),s(1,"Get started by creating your first custom role"),n())}function ve(r,i){if(r&1&&(t(0,"div",76),x(),t(1,"svg",77),c(2,"path",67),n(),h(),t(3,"h3"),s(4,"No roles found"),n(),f(5,be,2,0,"p",78)(6,Ce,2,0,"p",78),n()),r&2){let e=p();l(5),d("ngIf",e.searchQuery),l(),d("ngIf",!e.searchQuery)}}function Me(r,i){if(r&1){let e=v();t(0,"tr",88)(1,"td",81)(2,"div",89),c(3,"app-role-badge",90),n()(),t(4,"td",82)(5,"span",91),s(6),n()(),t(7,"td",83)(8,"span",92),s(9),n()(),t(10,"td",84)(11,"span",93),s(12),n()(),t(13,"td",85)(14,"span",94),s(15),z(16,"date"),n()(),t(17,"td",86)(18,"div",95)(19,"button",96),m("click",function(){let a=g(e).$implicit,_=p(2);return u(_.openEditModal(a))}),x(),t(20,"svg",35),c(21,"path",97)(22,"path",98),n()(),h(),t(23,"button",99),m("click",function(){let a=g(e).$implicit,_=p(2);return u(_.openDeleteModal(a))}),x(),t(24,"svg",35),c(25,"polyline",100)(26,"path",101),n()()()()()}if(r&2){let e=i.$implicit;l(3),d("role",e)("showCount",!1),l(2),C("system",e.isSystem)("custom",!e.isSystem),l(),b(" ",e.isSystem?"System":"Custom"," "),l(2),d("title",e.description),l(),b(" ",e.description||"No description"," "),l(2),C("has-users",e.userCount&&e.userCount>0),l(),b(" ",e.userCount||0," "),l(3),M(L(16,14,e.createdAt,"mediumDate")),l(8),d("disabled",e.isSystem||e.userCount&&e.userCount>0)}}function ye(r,i){if(r&1&&(t(0,"div",79)(1,"table",80)(2,"thead")(3,"tr")(4,"th",81),s(5,"Role"),n(),t(6,"th",82),s(7,"Type"),n(),t(8,"th",83),s(9,"Description"),n(),t(10,"th",84),s(11,"Users"),n(),t(12,"th",85),s(13,"Created"),n(),t(14,"th",86),s(15,"Actions"),n()()(),t(16,"tbody"),f(17,Me,27,17,"tr",87),n()()()),r&2){let e=p();l(17),d("ngForOf",e.filteredRoles)}}function Se(r,i){if(r&1&&(t(0,"div",119),s(1),n()),r&2){let e=p(2);l(),b(" ",e.getRoleValidationError()," ")}}function we(r,i){r&1&&c(0,"span",120)}function Re(r,i){r&1&&(t(0,"span"),s(1,"Create Role"),n())}function Oe(r,i){if(r&1){let e=v();t(0,"div",102),m("click",function(){g(e);let a=p();return u(a.closeCreateModal())}),t(1,"div",103),m("click",function(a){return g(e),u(a.stopPropagation())}),t(2,"div",104)(3,"h2"),s(4,"Create New Role"),n(),t(5,"button",105),m("click",function(){g(e);let a=p();return u(a.closeCreateModal())}),s(6,"\xD7"),n()(),t(7,"div",106)(8,"form",107),m("ngSubmit",function(){g(e);let a=p();return u(a.createRole())}),t(9,"div",108)(10,"label",109),s(11,"Role Name *"),n(),c(12,"input",110),t(13,"div",111),s(14," Use UPPERCASE with underscores (e.g., HR_MANAGER, TEAM_LEAD) "),n(),f(15,Se,2,1,"div",112),n(),t(16,"div",108)(17,"label",113),s(18,"Description"),n(),c(19,"textarea",114),t(20,"div",111),s(21," Briefly describe what this role can do (optional) "),n()(),t(22,"div",115)(23,"button",116),m("click",function(){g(e);let a=p();return u(a.closeCreateModal())}),s(24,"Cancel"),n(),t(25,"button",117),f(26,we,1,0,"span",118)(27,Re,2,0,"span",78),n()()()()()()}if(r&2){let e,o,a=p();l(8),d("formGroup",a.roleForm),l(4),C("error",((e=a.roleForm.get("name"))==null?null:e.invalid)&&((e=a.roleForm.get("name"))==null?null:e.touched)),l(3),d("ngIf",((o=a.roleForm.get("name"))==null?null:o.invalid)&&((o=a.roleForm.get("name"))==null?null:o.touched)),l(10),d("disabled",a.isSubmitting||a.roleForm.invalid),l(),d("ngIf",a.isSubmitting),l(),d("ngIf",!a.isSubmitting)}}function Pe(r,i){r&1&&(t(0,"div",126),x(),t(1,"svg",35),c(2,"path",67),n(),h(),t(3,"span"),s(4,"This is a system role. Only the description can be modified."),n()())}function Ee(r,i){if(r&1&&(t(0,"div",119),s(1),n()),r&2){let e=p(2);l(),b(" ",e.getRoleValidationError()," ")}}function ke(r,i){r&1&&c(0,"span",120)}function Te(r,i){r&1&&(t(0,"span"),s(1,"Update Role"),n())}function Fe(r,i){if(r&1){let e=v();t(0,"div",102),m("click",function(){g(e);let a=p();return u(a.closeEditModal())}),t(1,"div",103),m("click",function(a){return g(e),u(a.stopPropagation())}),t(2,"div",104)(3,"h2"),s(4,"Edit Role"),n(),t(5,"button",105),m("click",function(){g(e);let a=p();return u(a.closeEditModal())}),s(6,"\xD7"),n()(),t(7,"div",106)(8,"form",107),m("ngSubmit",function(){g(e);let a=p();return u(a.updateRole())}),f(9,Pe,5,0,"div",121),t(10,"div",108)(11,"label",122),s(12,"Role Name *"),n(),c(13,"input",123),f(14,Ee,2,1,"div",112),n(),t(15,"div",108)(16,"label",124),s(17,"Description"),n(),c(18,"textarea",125),n(),t(19,"div",115)(20,"button",116),m("click",function(){g(e);let a=p();return u(a.closeEditModal())}),s(21,"Cancel"),n(),t(22,"button",117),f(23,ke,1,0,"span",118)(24,Te,2,0,"span",78),n()()()()()()}if(r&2){let e,o,a=p();l(8),d("formGroup",a.roleForm),l(),d("ngIf",a.editingRole==null?null:a.editingRole.isSystem),l(4),C("error",((e=a.roleForm.get("name"))==null?null:e.invalid)&&((e=a.roleForm.get("name"))==null?null:e.touched)),l(),d("ngIf",((o=a.roleForm.get("name"))==null?null:o.invalid)&&((o=a.roleForm.get("name"))==null?null:o.touched)),l(8),d("disabled",a.isSubmitting||a.roleForm.invalid),l(),d("ngIf",a.isSubmitting),l(),d("ngIf",!a.isSubmitting)}}function Ve(r,i){r&1&&c(0,"span",120)}function Ie(r,i){r&1&&(t(0,"span"),s(1,"Delete Role"),n())}function De(r,i){if(r&1){let e=v();t(0,"div",102),m("click",function(){g(e);let a=p();return u(a.closeDeleteModal())}),t(1,"div",127),m("click",function(a){return g(e),u(a.stopPropagation())}),t(2,"div",104)(3,"h2"),s(4,"Confirm Delete"),n(),t(5,"button",105),m("click",function(){g(e);let a=p();return u(a.closeDeleteModal())}),s(6,"\xD7"),n()(),t(7,"div",106)(8,"div",128),x(),t(9,"svg",129),c(10,"path",130)(11,"line",131)(12,"line",132),n(),h(),t(13,"p",133),s(14," Are you sure you want to delete the role "),t(15,"strong"),s(16),n(),s(17,"? "),n(),t(18,"p",134),s(19,"This action cannot be undone."),n()(),t(20,"div",115)(21,"button",116),m("click",function(){g(e);let a=p();return u(a.closeDeleteModal())}),s(22,"Cancel"),n(),t(23,"button",135),m("click",function(){g(e);let a=p();return u(a.deleteRole())}),f(24,Ve,1,0,"span",118)(25,Ie,2,0,"span",78),n()()()()()}if(r&2){let e=p();l(16),M(e.deletingRole==null?null:e.deletingRole.name),l(7),d("disabled",e.isSubmitting),l(),d("ngIf",e.isSubmitting),l(),d("ngIf",!e.isSubmitting)}}var re=class r{roleService=P(ne);fb=P(K);searchQuery="";currentFilter="all";isLoading=!1;isSubmitting=!1;errorMessage=null;successMessage=null;roles=[];filteredRoles=[];systemRoles=[];customRoles=[];showCreateModal=!1;showEditModal=!1;showDeleteModal=!1;editingRole=null;deletingRole=null;roleForm;roleStats=[{title:"Total Roles",value:"0",icon:"shield",color:"#4F46E5"},{title:"System Roles",value:"0",icon:"lock",color:"#059669"},{title:"Custom Roles",value:"0",icon:"users",color:"#DC2626"}];constructor(){this.roleForm=this.fb.group({name:["",[y.required,y.minLength(2),y.maxLength(50),y.pattern(/^[A-Z_][A-Z0-9_]*$/)]],description:["",[y.maxLength(255)]]})}ngOnInit(){this.loadRoles()}loadRoles(){this.isLoading=!0,this.errorMessage=null,this.roleService.getAllRoles().subscribe({next:i=>{this.roles=i,this.systemRoles=i.filter(e=>e.isSystem),this.customRoles=i.filter(e=>!e.isSystem),this.applyFilters(),this.updateStats(),this.isLoading=!1},error:i=>{this.errorMessage="Failed to load roles. Please try again.",this.isLoading=!1,console.error("Error loading roles:",i)}})}applyFilters(){let i=[...this.roles];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase();i=i.filter(o=>o.name.toLowerCase().includes(e)||o.description&&o.description.toLowerCase().includes(e))}this.currentFilter==="system"?i=i.filter(e=>e.isSystem):this.currentFilter==="custom"&&(i=i.filter(e=>!e.isSystem)),this.filteredRoles=i}updateStats(){this.roleStats[0].value=this.roles.length.toString(),this.roleStats[1].value=this.systemRoles.length.toString(),this.roleStats[2].value=this.customRoles.length.toString()}onSearch(){this.applyFilters()}setFilter(i){this.currentFilter=i,this.applyFilters()}openCreateModal(){this.roleForm.reset(),this.showCreateModal=!0,this.errorMessage=null,this.successMessage=null}closeCreateModal(){this.showCreateModal=!1,this.roleForm.reset()}createRole(){if(this.roleForm.invalid){this.markFormGroupTouched(this.roleForm);return}this.isSubmitting=!0;let i={name:this.roleForm.value.name,description:this.roleForm.value.description};this.roleService.createRole(i).subscribe({next:e=>{this.roles.push(e),this.customRoles.push(e),this.applyFilters(),this.updateStats(),this.successMessage=`Role "${e.name}" created successfully!`,this.isSubmitting=!1,setTimeout(()=>this.closeCreateModal(),1500)},error:e=>{this.errorMessage=e.error?.message||"Failed to create role. Role name may already exist.",this.isSubmitting=!1}})}openEditModal(i){i.isSystem&&(this.errorMessage="System roles can only have their description modified."),this.editingRole=i,this.roleForm.patchValue({name:i.name,description:i.description||""}),i.isSystem?this.roleForm.get("name")?.disable():this.roleForm.get("name")?.enable(),this.showEditModal=!0,this.errorMessage=null,this.successMessage=null}closeEditModal(){this.showEditModal=!1,this.editingRole=null,this.roleForm.reset(),this.roleForm.get("name")?.enable()}updateRole(){if(!this.editingRole||this.roleForm.invalid){this.markFormGroupTouched(this.roleForm);return}this.isSubmitting=!0;let i={name:this.roleForm.value.name,description:this.roleForm.value.description};this.roleService.updateRole(this.editingRole.id,i).subscribe({next:e=>{let o=this.roles.findIndex(a=>a.id===e.id);if(o!==-1&&(this.roles[o]=e),e.isSystem){let a=this.systemRoles.findIndex(_=>_.id===e.id);a!==-1&&(this.systemRoles[a]=e)}else{let a=this.customRoles.findIndex(_=>_.id===e.id);a!==-1&&(this.customRoles[a]=e)}this.applyFilters(),this.successMessage=`Role "${e.name}" updated successfully!`,this.isSubmitting=!1,setTimeout(()=>this.closeEditModal(),1500)},error:e=>{this.errorMessage=e.error?.message||"Failed to update role.",this.isSubmitting=!1}})}openDeleteModal(i){if(i.isSystem){this.errorMessage="System roles cannot be deleted.";return}if(i.userCount&&i.userCount>0){this.errorMessage=`Cannot delete role "${i.name}" because it has ${i.userCount} user(s) assigned.`;return}this.deletingRole=i,this.showDeleteModal=!0,this.errorMessage=null}closeDeleteModal(){this.showDeleteModal=!1,this.deletingRole=null}deleteRole(){this.deletingRole&&(this.isSubmitting=!0,this.roleService.deleteRole(this.deletingRole.id).subscribe({next:()=>{this.roles=this.roles.filter(i=>i.id!==this.deletingRole.id),this.customRoles=this.customRoles.filter(i=>i.id!==this.deletingRole.id),this.applyFilters(),this.updateStats(),this.successMessage=`Role "${this.deletingRole?.name}" deleted successfully!`,this.isSubmitting=!1,setTimeout(()=>this.closeDeleteModal(),1500)},error:i=>{this.errorMessage=i.error?.message||"Failed to delete role.",this.isSubmitting=!1}}))}markFormGroupTouched(i){Object.values(i.controls).forEach(e=>{e.markAsTouched(),e instanceof Q&&this.markFormGroupTouched(e)})}getRoleValidationError(){let i=this.roleForm.get("name");return i?.hasError("required")?"Role name is required":i?.hasError("minlength")?"Role name must be at least 2 characters":i?.hasError("maxlength")?"Role name cannot exceed 50 characters":i?.hasError("pattern")?"Role name must be UPPERCASE with underscores (e.g., MANAGER_ROLE)":""}clearMessages(){this.errorMessage=null,this.successMessage=null}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-role-management"]],decls:63,vars:17,consts:[[1,"dashboard-container"],[1,"main-content"],[1,"sidecontent"],[1,"dashboard-header-section"],[1,"dashboard-header-content"],[1,"dashboard-title-section"],[1,"dashboard-title"],[1,"dashboard-subtitle"],[1,"dashboard-filters"],[1,"date-range-filter"],[1,"filter-header"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"calendar-icon"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"period-quick-filters"],[1,"period-filter-btn",3,"click"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"stats-grid"],["class","stat-card",3,"--card-color",4,"ngFor","ngForOf"],[1,"enhanced-table-card"],[1,"table-header-section"],[1,"table-title-section"],[1,"table-main-title"],[1,"table-subtitle"],[1,"table-controls"],[1,"table-search-box"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Search roles...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"table-action-buttons"],[1,"action-btn","refresh-btn",3,"click","disabled"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","23 4 23 10 17 10"],["d","M20.49 15a9 9 0 1 1-2.12-9.36L23 10"],[1,"action-btn","add-role-btn",2,"background","#4F46E5","color","white","border-color","#4F46E5",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-error"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"alert-icon"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"alert-close",3,"click"],[1,"alert","alert-success"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"stat-card"],[1,"card-bg-shape","shape-1"],[1,"card-bg-shape","shape-2"],[1,"stat-content"],[1,"stat-header"],[1,"title-section"],[1,"stat-title"],[1,"icon-container"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"stat-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"value-section"],[1,"stat-value"],["d","M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"loading-state"],[1,"spinner"],[1,"empty-state"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"empty-icon"],[4,"ngIf"],[1,"table-content"],[1,"enhanced-table"],[1,"col-role"],[1,"col-type"],[1,"col-description"],[1,"col-users"],[1,"col-created"],[1,"col-actions"],["class","table-row",4,"ngFor","ngForOf"],[1,"table-row"],[1,"role-cell"],[3,"role","showCount"],[1,"type-badge"],[1,"description-text",3,"title"],[1,"user-count"],[1,"date-text"],[1,"action-buttons"],["title","Edit Role",1,"action-icon-btn","edit-btn",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["title","Delete Role",1,"action-icon-btn","delete-btn",3,"click","disabled"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","roleName"],["type","text","id","roleName","formControlName","name","placeholder","e.g., MANAGER_ROLE",1,"form-input"],[1,"form-hint"],["class","error-message",4,"ngIf"],["for","roleDescription"],["id","roleDescription","formControlName","description","placeholder","Enter role description...","rows","3",1,"form-textarea"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-small",4,"ngIf"],[1,"error-message"],[1,"spinner-small"],["class","system-role-notice",4,"ngIf"],["for","editRoleName"],["type","text","id","editRoleName","formControlName","name",1,"form-input"],["for","editRoleDescription"],["id","editRoleDescription","formControlName","description","placeholder","Enter role description...","rows","3",1,"form-textarea"],[1,"system-role-notice"],[1,"modal-content","modal-small",3,"click"],[1,"delete-confirmation"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"warning-icon"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"delete-message"],[1,"delete-warning"],["type","button",1,"btn","btn-danger",3,"click","disabled"]],template:function(e,o){e&1&&(t(0,"div",0),c(1,"app-header"),t(2,"main",1),c(3,"app-sidebar"),t(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h1",6),s(9,"Role Management"),n(),t(10,"p",7),s(11,"Manage system roles and access control"),n()(),t(12,"div",8)(13,"div",9)(14,"div",10),x(),t(15,"svg",11),c(16,"rect",12)(17,"line",13)(18,"line",14)(19,"line",15),n(),h(),t(20,"span"),s(21,"Role Statistics"),n()(),t(22,"div",16)(23,"button",17),m("click",function(){return o.setFilter("all")}),s(24,"All Roles"),n(),t(25,"button",17),m("click",function(){return o.setFilter("system")}),s(26,"System"),n(),t(27,"button",17),m("click",function(){return o.setFilter("custom")}),s(28,"Custom"),n()()()()()(),f(29,me,9,1,"div",18)(30,ge,8,1,"div",19),t(31,"div",20),f(32,_e,17,10,"div",21),n(),t(33,"div",22)(34,"div",23)(35,"div",24)(36,"h3",25),s(37,"System Roles"),n(),t(38,"p",26),s(39,"Manage roles and access permissions"),n()(),t(40,"div",27)(41,"div",28),x(),t(42,"svg",29),c(43,"circle",30)(44,"line",31),n(),h(),t(45,"input",32),D("ngModelChange",function(_){return I(o.searchQuery,_)||(o.searchQuery=_),_}),m("input",function(){return o.onSearch()}),n()(),t(46,"div",33)(47,"button",34),m("click",function(){return o.loadRoles()}),x(),t(48,"svg",35),c(49,"polyline",36)(50,"path",37),n(),s(51," Refresh "),n(),h(),t(52,"button",38),m("click",function(){return o.openCreateModal()}),x(),t(53,"svg",35),c(54,"line",39)(55,"line",40),n(),s(56," Create Role "),n()()()(),f(57,he,4,0,"div",41)(58,ve,7,2,"div",42)(59,ye,18,1,"div",43),n()()()(),f(60,Oe,28,7,"div",44)(61,Fe,25,8,"div",44)(62,De,26,4,"div",44)),e&2&&(l(23),C("active",o.currentFilter==="all"),l(2),C("active",o.currentFilter==="system"),l(2),C("active",o.currentFilter==="custom"),l(2),d("ngIf",o.errorMessage),l(),d("ngIf",o.successMessage),l(2),d("ngForOf",o.roleStats),l(13),V("ngModel",o.searchQuery),l(2),d("disabled",o.isLoading),l(10),d("ngIf",o.isLoading),l(),d("ngIf",!o.isLoading&&o.filteredRoles.length===0),l(),d("ngIf",!o.isLoading&&o.filteredRoles.length>0),l(),d("ngIf",o.showCreateModal),l(),d("ngIf",o.showEditModal),l(),d("ngIf",o.showDeleteModal))},dependencies:[R,N,w,G,A,B,X,W,j,U,$,q,J,Y,Z,H,ee,te,O],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Nunito,sans-serif}.dashboard-container[_ngcontent-%COMP%]{display:block;min-height:100vh;background-color:#eaebec;padding:8px 16px}.main-content[_ngcontent-%COMP%]{display:flex;padding:0;overflow-x:auto}.sidecontent[_ngcontent-%COMP%]{padding:0 24px 10px;overflow-y:auto;margin-left:270px;margin-top:10px;width:calc(100% - 220px);height:calc(100vh - 55px)}.dashboard-header-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border-radius:20px;padding:24px;margin-bottom:32px;box-shadow:0 10px 25px -5px #0000001a,0 4px 6px -2px #0000000d;border:1px solid rgba(255,255,255,.8);backdrop-filter:blur(10px)}.dashboard-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:24px}.dashboard-title-section[_ngcontent-%COMP%]{flex:1}.dashboard-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;color:#1e293b;margin-bottom:8px;background:linear-gradient(135deg,#4f46e5,#7c3aed);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 2px 4px rgba(0,0,0,.05)}.dashboard-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:500}.dashboard-filters[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.date-range-filter[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px;box-shadow:0 4px 12px #0000000d;border:1px solid #e2e8f0;min-width:380px}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #f1f5f9}.calendar-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#4f46e5}.filter-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#1e293b}.period-quick-filters[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.period-filter-btn[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid #e2e8f0;background:#fff;border-radius:10px;font-size:13px;font-weight:600;color:#64748b;cursor:pointer;transition:all .2s ease}.period-filter-btn[_ngcontent-%COMP%]:hover{border-color:#4f46e5;color:#4f46e5;transform:translateY(-1px)}.period-filter-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;border-color:transparent;box-shadow:0 4px 12px #4f46e54d}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;margin-bottom:20px;border-radius:8px;font-size:14px}.alert-error[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #fecaca;color:#dc2626}.alert-success[_ngcontent-%COMP%]{background-color:#d1fae5;border:1px solid #a7f3d0;color:#059669}.alert-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:12px;flex-shrink:0}.alert-close[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;font-size:20px;cursor:pointer;color:inherit;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;position:relative;overflow:hidden;box-shadow:0 1px 3px #0000001a}.card-bg-shape[_ngcontent-%COMP%]{position:absolute;border-radius:50%;opacity:.1}.shape-1[_ngcontent-%COMP%]{width:150px;height:150px;background:var(--card-color);top:-75px;right:-75px}.shape-2[_ngcontent-%COMP%]{width:100px;height:100px;background:var(--card-color);bottom:-50px;right:50px}.stat-content[_ngcontent-%COMP%]{position:relative;z-index:1}.stat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.stat-title[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;font-weight:500}.icon-container[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff}.stat-icon[_ngcontent-%COMP%]{width:24px;height:24px}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#111827;margin-bottom:4px}.enhanced-table-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.table-header-section[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px}.table-title-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0 0 4px}.table-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.table-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.table-search-box[_ngcontent-%COMP%]{position:relative}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#9ca3af}.search-input[_ngcontent-%COMP%]{padding:10px 12px 10px 40px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;width:250px;transition:border-color .2s}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.table-action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;border:1px solid #d1d5db;border-radius:8px;background:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.add-role-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff;border:none}.add-role-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#4338ca,#6d28d9)}.table-content[_ngcontent-%COMP%]{overflow-x:auto}.enhanced-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.enhanced-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px 24px;font-size:12px;font-weight:600;text-transform:uppercase;color:#6b7280;background:#f9fafb;border-bottom:1px solid #e5e7eb}.enhanced-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;border-bottom:1px solid #e5e7eb;font-size:14px;color:#374151}.table-row[_ngcontent-%COMP%]:hover{background:#f9fafb}.role-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500}.type-badge.system[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.type-badge.custom[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.description-text[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.user-count[_ngcontent-%COMP%]{font-weight:600;color:#6b7280}.user-count.has-users[_ngcontent-%COMP%]{color:#059669}.date-text[_ngcontent-%COMP%]{color:#6b7280;font-size:13px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.action-icon-btn[_ngcontent-%COMP%]{width:36px;height:36px;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.action-icon-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.edit-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.edit-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.delete-btn[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.delete-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#fecaca}.delete-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.loading-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#6b7280}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top-color:#4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 16px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center}.empty-icon[_ngcontent-%COMP%]{width:48px;height:48px;color:#d1d5db;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#374151;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 25px -5px #0000001a}.modal-small[_ngcontent-%COMP%]{max-width:400px}.modal-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#111827;margin:0}.modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;color:#9ca3af;cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s}.modal-close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-body[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.form-input.error[_ngcontent-%COMP%]{border-color:#dc2626}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:4px}.error-message[_ngcontent-%COMP%]{font-size:12px;color:#dc2626;margin-top:4px}.system-role-notice[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#dbeafe;border:1px solid #bfdbfe;border-radius:8px;margin-bottom:20px;font-size:13px;color:#1e40af}.system-role-notice[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:20px;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;border:none;display:inline-flex;align-items:center;gap:8px}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5e7eb}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#4338ca,#6d28d9)}.btn-danger[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.delete-confirmation[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.warning-icon[_ngcontent-%COMP%]{width:48px;height:48px;color:#f59e0b;margin-bottom:16px}.delete-message[_ngcontent-%COMP%]{font-size:16px;color:#374151;margin-bottom:8px}.delete-warning[_ngcontent-%COMP%]{font-size:14px;color:#dc2626;margin:0}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@media (max-width: 768px){.table-header-section[_ngcontent-%COMP%]{flex-direction:column}.table-controls[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.search-input[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.enhanced-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .enhanced-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px}.col-description[_ngcontent-%COMP%], .col-created[_ngcontent-%COMP%]{display:none}.sidecontent[_ngcontent-%COMP%]{margin-left:0;width:100%}}"]})};export{re as RoleManagementComponent};
